=  DevOps at Sonatype
:title: Lessons Learned using Repository Managers and Supply Chain Tools for DevOps at Sonatype
:Author:   Manfred Moser, Sonatype, Inc.
:Date: October 2015
:max-width: 45em
:icons:
:copyright: Copyright 2011-present, Sonatype Inc. All Rights Reserved.
:incremental:

== DevOps at Sonatype
:incremental!:

Lessons Learned from Using Repository Managers and Software Supply Chain Tools 

Manfred Moser 

* http://twitter.com/simpligility[#simpligility] 
* Author, Trainer and Community Advocate

Brian Fox

* http://twitter.com/brian_fox[#brian_fox] 
* VP of Product Engineering

Sonatype - http://www.sonatype.com[www.sonatype.com]

== What Are You Learning Today?
:incremental!:

* See what worked for us
* And what caused us problems

-> Improvements for your own situation

== What does Sonatype actually do? 

Manages and develops:

* Nexus repository manager
* Nexus Lifecycle software supply chain automation 
* Nexus IQ Data Services component intellignec
* Central Repository (formerly Maven Central)
* OSSRH and related Forges
* Related documentation, websites, blogs, videos,...

== Nexus Repository Manager

* Nexus 2 - 70% market share
* Nexus 3 - upcoming
* Open source: Maven2, npm, RubyGems, NuGet, Docker, ...
* Commercial: Staging, Smart Proxy, ...


== Software Supply Chain Automation

* Nexus Lifecycle
* Nexus IQ Server
* Partner integrations (HP Foritfy On Demand ?)
* Nexus Firewall (?)
* Integrations with Jenkins, Hudson, Bamboo
* Eclipse IDE/M2e Plugin
* SonarQube Integration

All of this is backed by... 

== Nexus IQ Data Services

Curated and managed data and services for:

* Age
* Popularity
* Security vulnerabilities
* License analysis data (observed and declared)
* 

== Central Repository

* Largest Maven2 format repository (numbers!)
* High performance, global CDN 
* Default in Maven2 and others

And the components come from

== OSSRH and Forges

Input funnel for Central Repository

* OSSRH - large deployment of Nexus Pro
* Apache, JBoss, ... - secondary Nexus instances that sync
* Community support - onboarding and documentation


== Who Helps at Sonatype

* Internationally distributed 
* Multiple-time zones
* Remote work the rule, not exception

== Teams

* Numerous smaller teams
* Different focus of teams
* Cross-team members 


== Communication

* Google Drive
* HipChat
* Good old phone and VOIP
* Google Hangouts

== SCM

* GitHub
* Stash

== Track and Plan

* JIRA
* Aha
* Trello

== Continuous Integration

* Bamboo
* feature branch builds

== Nexus Pro usage

* proxy 
* host 
* staging
* Thousands of users and projects on OSSRH


== Build

* Apache Maven
* Grunt and NPM for client side
* Bash Scripts

== Maven Tips and Tricks

* Maven wrapper
* Follow 
* Find balance of number of projects vs.
* Avoid forking third party libraries



== Develop

* Eclipse IDE
* IntelliJ IDEA



== Test


* Geb
* Spock

== Document

* Asciidoc
* Pelican

== Continuously Build

* Atlassian Bamboo
* EC2 instances
* Feature branch builds
* Automated functional test suite runs
* Automated release
* Documentation builds and deployments

== Validate

* SonarQube
* License check with Maven plugin

== Release

* Workflow and notification with Nexus staging
* Including validation with Nexus Lifecycle
** Security checks
** License checks
** ?? anything else, maybe component age

* Usage of release build number - `2.11.4-01`

* Same release stuff on OSSRH

== Community

* Actively work with vendors
* Including open source projects
* Help upstream to help yourself
** Report issues
** Release testing
** Contributions



== Next?
:incremental!:

* Join us the Nexus community
* Try Nexus 
* Try Nexus Lifecycle
* Come to out booth

== The End 
:incremental!:

Questions, Remarks &  Discussion

TIP: Slides and examples at http://sonatype.github.io/nexus-presentations/[http://sonatype.github.io/nexus-presentations/] or email manfred@sonatype.com

... and we are hiring!

== Resources
:incremental:

* http://www.sonatype.com[sonatype.com]
* http://www.sonatype.org/nexus/[Nexus community]
* http://search.maven.org[Central Repository] and http://central.sonatype.org[documentation]
* https://www.youtube.com/user/sonatype[Youtube channel]
* http://www.sonatype.org/nexus/2015/04/16/using-atlassian-bamboo-and-nexus-for-continuous-integration/[Inside Engineering - blog post]
* http://www.sonatype.org/nexus/members-only/video-gallery-2/inside-the-sonatype-engineering-machine-the-process-and-the-tooling/[Inside Engineering - videos]
